"use strict";var queryC2cFaceVerifyLoop=!1,queryC2cFaceVerifyLoopTimer=null,qrTimer={initTime:300,time:0,timer:null,setTimer:function(){this.timer=setInterval(function(){0<qrTimer.time?(qrTimer.time-=1,$("#faceVerifyTimer").html("0"+parseInt(qrTimer.time/60)+":"+(9<qrTimer.time%60?qrTimer.time%60:"0"+qrTimer.time%60))):($("#faceVerifyTimer").html(lang_string("\u5DF2\u7ECF\u8FC7\u671F")),clearInterval(qrTimer.timer),queryC2cFaceVerify(!1,{msg:lang_string("\u9A8C\u8BC1\u8FC7\u7A0B\u8D85\u65F6")}))},1e3)}};function showC2cFaceVerify(a,b){function c(a){var b=encodeURI(a),c=btoa(b);return c}if(!a)return $(".face_verify_dialog").hide().remove(),clearInterval(qrTimer.timer),qrTimer.timer=null,!1;var d="";d+="<div class=\"face_verify_dialog\"><div class=\"face_verify_dialog-por\"><div class=\"face_verify_dialog_content\"><span class=\"face_verify_dialog-icon-close\"></span><div class=\"face_verify_dialog_body\"><h4>"+lang_string("\u626B\u7801\u4EBA\u8138\u8BC6\u522B")+"</h4><img class=\"face_verify_icon\" src=\"/images/face_verify.svg\"><i class=\"dialog_err_msg\">"+lang_string("\u4E3A\u4E86\u4FDD\u969C\u60A8\u7684\u8D44\u91D1\u5B89\u5168\uFF0C\u672C\u6B21\u9700\u8981\u4F7F\u7528\u201CGate.io\u201DAPP\u626B\u7801\u8FDB\u884C\u4EBA\u8138\u8BC6\u522B\u8BA4\u8BC1")+"</i><p>"+lang_string("\u64CD\u4F5C\u6D41\u7A0B")+": <span>1."+lang_string("\u767B\u5F55App")+"</span><span>2."+lang_string("\u70B9\u51FB\u626B\u4E00\u626B")+"<svg class=\"icon\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"><path d=\"M813.34 391.464h60.267V180.527c0-16.657-13.477-30.134-30.134-30.134H632.536v60.268h180.803v180.803zM210.66 210.66h180.804v-60.267H180.527c-16.657 0-30.134 13.477-30.134 30.134v210.937h60.268V210.661zM210.66 632.536h-60.267v210.937c0 16.657 13.477 30.134 30.134 30.134h210.937V813.34H210.661V632.536zM813.34 813.34H632.535v60.267h210.937c16.657 0 30.134-13.477 30.134-30.134V632.536H813.34v180.803zM873.607 481.866H150.393c-16.657 0-30.134 13.477-30.134 30.134s13.477 30.134 30.134 30.134h723.214c16.657 0 30.134-13.477 30.134-30.134s-13.477-30.134-30.134-30.134z\"/></svg></span></p><div class=\"qrcode_box\"><h5>"+lang_string("\u626B\u63CF\u4E8C\u7EF4\u7801")+"</h5><div class=\"face_verify_qrcode\" id=\"face_verify_qrcode\"></div><h6><span class=\"reload_face_verify_qrcode\">"+lang_string("\u5237\u65B0\u4E8C\u7EF4\u7801")+"</span></h6></div><div class=\"face_verify_qrcode_timer\"><span>"+lang_string("\u4E8C\u7EF4\u7801\u6709\u6548\u671F")+": </span><span id=\"faceVerifyTimer\">05:00</span></div><input type=\"button\" value=\""+lang_string("\u53D6\u6D88")+"\" class=\"sub-btn face_verify_dialog_btn\"></div><div class=\"face_verify_dialog_footer\"><div class=\"download_app\" id=\"face_verify_download_app\"></div><div class=\"flex-1\"><p>"+lang_string("Gate.io \u829D\u9EBB\u5F00\u95E8\uFF0C\u4E0E\u4F60\u4E00\u540C\u5F00\u542F\u6570\u5B57\u8D27\u5E01\u4E4B\u95E8\uFF01")+"</p><a href=\"/mobileapp\">"+lang_string("\u4E0B\u8F7DAPP")+"</a></div><img class=\"bg_img\" src=\"/images/?v=0526\"></div></div></div></div>",$("body").append(d),$("#face_verify_download_app").qrcode({render:"canvas",width:70,height:70,text:decodeURIComponent(window.location.origin+"/mobileapp/download?appLang="+g_lang)}),qrTimer.time=qrTimer.initTime;var e=+Date.parse(new Date).toString().substring(0,10)+qrTimer.initTime,f=`verify/${c(uid)}/${c(`{"action":"2","time":"${e}"}`)}`;$("#face_verify_qrcode").qrcode({render:"canvas",width:150,height:150,text:decodeURIComponent(f)}),qrTimer.setTimer(),queryC2cFaceVerify(!0,"",b),$(".face_verify_dialog_content .face_verify_dialog-icon-close").on("click",debounce(function(){showC2cFaceVerify(!1),queryC2cFaceVerify(!1)})),$(".face_verify_dialog_content .face_verify_dialog_btn").on("click",debounce(function(){showC2cFaceVerify(!1),queryC2cFaceVerify(!1)})),$(".reload_face_verify_qrcode").on("click",debounce(function(){$("#face_verify_qrcode").find("canvas").remove(),$("#faceVerifyTimer").html("05:00"),setTimeout(function(){var a=+Date.parse(new Date).toString().substring(0,10)+qrTimer.initTime,b=`verify/${c(uid)}/${c(`{"action":"2","time":"${a}"}`)}`;$("#face_verify_qrcode").qrcode({render:"canvas",width:150,height:150,text:decodeURIComponent(b)}),clearInterval(qrTimer.timer),qrTimer.time=qrTimer.initTime,qrTimer.setTimer()},100)}))}function queryC2cFaceVerify(a,b,c){return window.queryC2cFaceVerifyLoop=a,a?void(window.queryC2cFaceVerifyLoop&&($.ajax({url:"/json_svr/c2c_faceverify_result?u=32",type:"post",data:{},success:function(a){a?0==a.code&&queryC2cFaceVerify(!1,"",c):queryC2cFaceVerify(!1,{msg:lang_string("\u7F51\u7EDC\u9519\u8BEF")})},error:function(a){console.log(a),queryC2cFaceVerify(!1,{msg:lang_string("\u7F51\u7EDC\u9519\u8BEF")})}}),queryC2cFaceVerifyLoopTimer=setTimeout(function(){queryC2cFaceVerify(!0,"",c)},3e3))):(clearTimeout(queryC2cFaceVerifyLoopTimer),window.setQuickTradeLoading&&window.setQuickTradeLoading(!1),showC2cFaceVerify(!1),b&&b.msg&&gateErrorNoty("",b.msg),c&&c(),!1)}function gateErrorNoty(a,b,c){if("function"==typeof a)return void a(b);var d={open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50};1==c?$(".noty_container").noty({text:b,type:"error",layout:"center",theme:"gateioNotyTheme",animation:d,callback:{afterShow:function(){var a=$(".noty_container").find("ul"),b=document.body.clientHeight;a.css("top",(b-a.height())/2)},afterClose:function(){$(".noty_modal").remove()}}}):noty({text:b,type:"error",layout:"center",closeWith:["button","click"],theme:"gateioNotyTheme",animation:d,timeout:1e4,callback:{afterClose:function(){$(".noty_modal").remove(),window.setQuickTradeLoading&&window.setQuickTradeLoading(!1)}}})}